!function(){var windmill={version:"0.1.0"};windmill.svg={},windmill.svg.translate=function(dx,dy){return"translate("+[dx,dy]+")"},windmill.svg.scale=function(sx,sy){return arguments.length<2&&(sy=sx),"scale("+[sx,sy]+")"},windmill.chart={},windmill.chart.heatMap=function(){"use strict";function chart(selection){selection.each(function(data){var div=d3.select(this),svg=div.selectAll("svg").data([data]).enter().append("svg").call(chart.svgInit),nrows=data.length,ncols=data[0].length,w=width-margin.left-margin.right,h=height-margin.top-margin.bottom,xScale=d3.scale.ordinal().domain(d3.range(ncols)).rangeBands([0,w]),yScale=d3.scale.ordinal().domain(d3.range(nrows)).rangeBands([0,h]),flat=data.reduce(function(prev,current){return prev.concat(current)}),valueExtent=d3.extent(flat,value),colorScale=d3.scale.linear().domain(valueExtent).range(colorExtent),g=svg.select("g.chart"),gRows=g.selectAll("g").data(data).enter().append("g").attr("class","row").attr("transform",function(d,i){return windmill.svg.translate(0,yScale(i))});gRows.selectAll("rect").data(function(d){return d}).enter().append("rect").attr("x",function(d,i){return xScale(i)}).attr("width",xScale.rangeBand()).attr("height",yScale.rangeBand()).attr("fill",function(d){return colorScale(d)})})}var width=100,height=100,margin={top:20,right:20,bottom:40,left:40},colorExtent=["#000","#aaa"],value=function(d){return d.value};return chart.svgInit=function(selection){var svg=selection.attr("width",width).attr("height",height);svg.append("g").attr("class","chart").attr("transform",function(){return windmill.svg.translate(margin.left,margin.top)})},chart.value=function(valueAccessor){return arguments.length?(value=valueAccessor,chart):value},chart.colorExtent=function(colorExt){return arguments.length?(colorExtent=colorExt,chart):colorExtent},chart.width=function(w){return arguments.length?(width=w,chart):width},chart.height=function(h){return arguments.length?(height=h,chart):height},chart.margin=function(m){return arguments.length?(margin=m,chart):margin},chart},"object"==typeof module&&module.exports?(this.d3=require("d3"),module.exports=windmill):this.windmill=windmill}();